<core:FragmentDefinition xmlns="sap.m"
    xmlns:vk="sap.ui.vk"
    xmlns:vbm="sap.ui.vbm"
    xmlns:core="sap.ui.core">
    <vk:MapContainer>
        <vk:listPanelStack>
            <vk:ListPanelStack width="230px">
                <vk:content>
                    <vk:ListPanel headerText="Legend" selectionMode="SingleSelectMaster" headerIcon="sap-icon://legend" expanded="true">
                        <vk:items>
                            <GroupHeaderListItem title="Transport" upperCase="false" />
                            <vk:LegendItem title="Truck" icon="sap-icon://shipping-status" />
                            <vk:LegendItem title="Train" icon="sap-icon://cargo-train" />
                            <GroupHeaderListItem title="Status" upperCase="false" />
                            <vk:LegendItem title="&gt; 1h delay" color="rgb(211,32,48)" />
                            <vk:LegendItem title="&lt; 1h delay" color="rgb(225,123,36)" />
                            <vk:LegendItem title="on time" color="rgb(97,166,86)" />
                        </vk:items>
                    </vk:ListPanel>
                    <vk:ListPanel id="location" headerText="Location" headerIcon="sap-icon://factory" expanded="true" selectionMode="MultiSelect" selectionChange="onSelectionChange">
                        <vk:items>
                            <vk:LegendItem title="Frankfurt" />
                            <vk:LegendItem title="Hamburg" />
                            <vk:LegendItem title="Munich" />
                        </vk:items>
                    </vk:ListPanel>
                </vk:content>
            </vk:ListPanelStack>
        </vk:listPanelStack>

        <vk:content>
            <vk:ContainerContent title="{i18n>recyclingMap}" icon="sap-icon://geographic-bubble-chart">
                <vk:content>
                    <vbm:GeoMap centerPosition="{mapModel>/center}" initialZoom="{mapModel>/initialZoom}" width="100%" height="100%" mapConfiguration="{mapConfigModel>/config}">
                        <vbm:vos>
                            <vbm:Spots items="{mapPointsModel>/value}">
                                <vbm:items>
                                    <vbm:Spot position="{=${mapPointsModel>longitude}+';'+${mapPointsModel>latitude}}" type='Success' click="pressPin">
                                        <vbm:customData>
                                            <core:CustomData key='status' />
                                        </vbm:customData>
                                    </vbm:Spot>
                                </vbm:items>
                            </vbm:Spots>
                        </vbm:vos>
                    </vbm:GeoMap>
                </vk:content>
            </vk:ContainerContent>
        </vk:content>
    </vk:MapContainer>
</core:FragmentDefinition>